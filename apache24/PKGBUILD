# Maintainer: Rexct <rexct1 at gmail dot com>
pkgname=apache24
pkgver=2.4.4
pkgrel=1
pkgdesc="A high performance Unix-based HTTP server"
arch=('sh4')
url="http://apr.apache.org/dist/httpd"
license=('APACHE')
backup=(etc/httpd/conf/httpd.conf
        etc/httpd/conf/extra/httpd-{autoindex,dav,default,info,languages}.conf
        etc/httpd/conf/extra/httpd-{manual,mpm,multilang-errordoc}.conf
        etc/httpd/conf/extra/httpd-{ssl,userdir,vhosts}.conf
        etc/logrotate.d/httpd)
groups=()
depends=('openssl' 'zlib' 'apr-util' 'pcre' )
optdepends=('lynx: apachectl status')
makedepends=('gcc')
provides=('apache')
conflicts=('apache')
options=('!libtool')
install=
changelog=$pkgname.changelog
source=(httpd-$pkgver.tar.gz::http://mirror.csclub.uwaterloo.ca/apache/httpd/httpd-${pkgver}.tar.gz )
noextract=()
md5sums=('a2fed766e67c9681e0d9b86768f08286')

build() {
  cd "${srcdir}/httpd-${pkgver}"
  ./configure --prefix=/usr/local/apache --sysconfdir=/etc/httpd --enable-so --enable-ssl --enable-cgi --enable-rewrite --with-zlib --with-pcre --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util --enable-mpms-shared=all --with-mpm=event 
}

check() {
  cd "${srcdir}/httpd-${pkgver}"
  make -j1 check
}

package() {
  cd "${srcdir}/httpd-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
