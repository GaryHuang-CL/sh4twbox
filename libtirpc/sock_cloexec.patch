Index: libtirpc-0.2.2/src/rpc_soc.c
==================================================================
--- a.orig/src/rpc_soc.c
+++ a/src/rpc_soc.c
@@ -103,10 +103,16 @@
 	}
 	if (fd == RPC_ANYSOCK) {
 		static int have_cloexec;
 		fd = __rpc_nconf2fd_flags(nconf, flags);
 		if (fd == -1) {
+/* only available on linux >= 2.6.27
+http://lists.freedesktop.org/archives/dbus/2010-August/013224.html
+ */
+#ifndef SOCK_CLOEXEC
+#define SOCK_CLOEXEC 0
+#endif
 			if ((flags & SOCK_CLOEXEC) && have_cloexec <= 0) {
 				fd = __rpc_nconf2fd(nconf);
 				if (fd == -1)
 					goto syserror;
 				if (flags & SOCK_CLOEXEC) {

